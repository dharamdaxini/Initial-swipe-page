<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Alchemist V81.10</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #000; 
            --card: #111; 
            --gold: #ffd600; 
            --border: #222; 
            --serif: 'Libre Baskerville', serif; 
            --ui: 'Outfit', sans-serif; 
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            margin: 0; 
            height: 100vh; 
            background: var(--bg); 
            color: #fff; 
            font-family: var(--ui); 
            overflow: hidden; 
            touch-action: none; 
        }

        /* HEADER METADATA */
        #header { 
            width: 90%; 
            margin: 35px auto 0; 
            position: relative; 
            z-index: 100; 
        }

        .header-meta { 
            display: flex; 
            justify-content: space-between; 
            font-size: 0.7rem; 
            color: #555; 
            letter-spacing: 5px; 
            text-transform: uppercase; 
            font-weight: 900; 
        }

        /* THE PHYSICAL STACK ENGINE */
        #stack { 
            position: relative; 
            width: 90%; 
            max-width: 400px; 
            height: 72vh; 
            margin: 35px auto 0; 
            perspective: 1200px; 
        }

        .card { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            background: var(--card); 
            border-radius: 32px; 
            border: 1px solid var(--border); 
            padding: 45px 30px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            z-index: 5; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.9);
            transition: filter 0.5s ease, opacity 0.4s ease, transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); 
            will-change: transform, filter;
        }

        /* THE RIFT STATE (V81.10 TRANSITION) */
        .card.study-active { 
            filter: blur(25px) brightness(0.2); 
            opacity: 0.4; 
            transform: scale(0.88) translateY(50px) rotateX(-8deg); 
            pointer-events: none; 
        }

        .card-q { 
            font-family: var(--serif); 
            font-size: 1.7rem; 
            line-height: 1.5; 
            font-weight: 700; 
            text-align: center; 
            color: #fff; 
        }

        /* REFINED STUDY DRAWER Reveal */
        .study-drawer { 
            position: absolute; 
            inset: 0; 
            padding: 40px 25px; 
            z-index: 10; 
            display: flex; 
            flex-direction: column; 
            opacity: 0; 
            visibility: hidden; 
            transform: translateY(30px) scale(0.95); 
            transition: all 0.6s cubic-bezier(0.19, 1, 0.22, 1); 
        }

        .study-drawer.active { 
            opacity: 1; 
            visibility: visible; 
            transform: translateY(0) scale(1); 
        }

        .bullet-item { 
            font-size: 1.15rem; 
            line-height: 1.7; 
            color: #ccc; 
            font-family: var(--serif); 
            margin-bottom: 20px; 
            padding-left: 28px; 
            position: relative; 
        }

        .bullet-item::before { 
            content: ""; 
            position: absolute; 
            left: 0; 
            top: 12px; 
            width: 6px; 
            height: 6px; 
            background: var(--gold); 
            border-radius: 50%; 
            box-shadow: 0 0 10px var(--gold); 
        }

        .principle-text { 
            font-size: 1.4rem; 
            line-height: 1.5; 
            color: var(--gold); 
            font-family: var(--serif); 
            font-style: italic; 
            border-top: 1px solid #1a1a1a; 
            padding-top: 30px; 
            margin-top: 20px; 
        }

        #loader { 
            position: fixed; 
            inset: 0; 
            background: #000; 
            z-index: 5000; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: 900; 
            color: var(--gold); 
            letter-spacing: 7px; 
        }
    </style>
</head>
<body>

<div id="loader">ALCHEMIST V81.10</div>

<div id="header">
    <div class="header-meta"><span>REVENUE ENGINE</span><span>SET ALPHA</span></div>
</div>

<div id="stack">
    <div id="study-drawer" class="study-drawer">
        <div id="bullet-mount"></div>
        <div id="judgement-text" class="principle-text"></div>
    </div>
</div>

<script>
    var DB = [
        { "q": "Signs of ΔH and ΔS for spontaneity at all temps?", "b": ["ΔH < 0 (Exothermic)", "ΔS > 0 (Increased Disorder)"], "j": "Nature favors energy release and chaos." },
        { "q": "Predict spontaneity: ΔH = -120 kJ, ΔS = -150 J/K at 298 K.", "b": ["ΔG = ΔH - TΔS", "Negative ΔG = Spontaneous"], "j": "Exothermic release can overcome entropy loss." },
        { "q": "Hybridization of Carbon in Ethane (CH3-CH3)?", "b": ["4 single bonds", "Tetrahedral geometry"], "j": "Sp3 allows for flexible molecular rotation." }
    ];

    var POOL = DB.slice();
    var sy = 0;
    var isLocked = false;

    function init() { 
        setTimeout(function() { 
            var l = document.getElementById('loader');
            if(l) l.remove(); 
            render(); 
        }, 1000); 
    }

    function render() {
        var s = document.getElementById('stack');
        var existing = s.querySelector('.card');
        if(existing) existing.remove();
        
        if(!POOL.length) { 
            s.innerHTML = '<div class="card"><div class="card-q" style="color:#ffd600">STAY HUNGRY</div></div>'; 
            return; 
        }
        
        var data = POOL[0];
        var card = document.createElement('div');
        card.className = "card";
        card.innerHTML = '<div class="card-q">' + data.q + '</div>';
        s.appendChild(card);
        
        document.getElementById('bullet-mount').innerHTML = data.b.map(function(item) { 
            return '<div class="bullet-item">' + item + '</div>'; 
        }).join('');
        
        document.getElementById('judgement-text').innerText = data.j;
        document.getElementById('study-drawer').classList.remove('active');
        isLocked = false;
        
        bindPhysics(card);
    }

    function bindPhysics(el) {
        el.ontouchstart = function(e) { 
            sy = e.touches[0].clientY; 
            el.style.transition = "none"; 
        };
        
        el.ontouchmove = function(e) {
            var dy = e.touches[0].clientY - sy;
            if(!isLocked && dy > 110) { 
                isLocked = true;
                document.getElementById('study-drawer').classList.add('active');
                el.classList.add('study-active');
            }
            if(!isLocked && dy > 0) {
                el.style.transform = "translateY(" + (dy * 0.25) + "px) rotate(" + (dy/65) + "deg)";
            }
        };

        el.ontouchend = function(e) {
            var dy = e.changedTouches[0].clientY - sy;
            if(isLocked && dy < -60) { 
                el.style.transition = "transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.4s";
                el.style.transform = "translateY(-800px) scale(1.1)";
                el.style.opacity = "0";
                setTimeout(function() { 
                    POOL.shift(); 
                    render(); 
                }, 350);
            } else {
                el.style.transition = "transform 0.4s cubic-bezier(0.19, 1, 0.22, 1)";
                el.style.transform = "translateY(0) rotate(0deg) scale(1)";
            }
        };
    }

    window.onload = init;
</script>
</body>
</html>
