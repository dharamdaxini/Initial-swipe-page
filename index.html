<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Alchemist Base</title>

<style>
:root{
  --bg:#000;
  --card:#111;
  --border:#222;
  --gold:#ffd600;
  --blue:#4da3ff;
  --red:#ff6b6b;
  --green:#6bff95;
  --muted:#666;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font-family:system-ui;
  overflow:hidden;
  touch-action:none;
}

#stack{
  width:90%;
  max-width:420px;
  height:70vh;
  margin:60px auto 0;
  position:relative;
}

.card{
  position:absolute;
  inset:0;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:28px;
  padding:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  font-size:1.6rem;
  transition:transform .25s ease;
}

.swipe{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  opacity:0;
  pointer-events:none;
}

.up{color:var(--gold)}
.down{color:var(--blue)}
.left{color:var(--red)}
.right{color:var(--green)}
</style>
</head>

<body>

<div id="stack"></div>

<script>
/* ---------------- STATE ---------------- */
let MODE = "DATASET";

/* ---------------- CORE RENDER ---------------- */
const stack = document.getElementById("stack");

function renderCard(text){
  stack.innerHTML="";
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`
    ${text}
    <div class="swipe up">UP</div>
    <div class="swipe down">DOWN</div>
    <div class="swipe left">LEFT</div>
    <div class="swipe right">RIGHT</div>
  `;
  stack.appendChild(c);
  bindSwipe(c);
}

function render(){
  if(MODE==="DATASET") renderCard("SELECT SUBJECT");
  if(MODE==="TOPIC") renderCard("SELECT TOPIC");
  if(MODE==="DEPTH"){
    renderCard(`
      SELECT DEPTH<br><br>
      ↑ Concept<br>
      ↓ Application<br>
      ← Lab<br>
      → PhD
    `);
  }
  if(MODE==="COMING_SOON") renderCard("COMING SOON");
  if(MODE==="QUIZ") renderCard("QUESTION SCREEN");
}

/* ---------------- SWIPE ENGINE ---------------- */
function bindSwipe(el){
  let sx=0,sy=0,dx=0,dy=0;

  el.ontouchstart=e=>{
    sx=e.touches[0].clientX;
    sy=e.touches[0].clientY;
  };

  el.ontouchmove=e=>{
    dx=e.touches[0].clientX-sx;
    dy=e.touches[0].clientY-sy;
    el.style.transform=`translate(${dx}px,${dy}px)`;
    showLabel(el,dx,dy);
  };

  el.ontouchend=()=>{
    el.style.transform="translate(0,0)";
    handleSwipe(dx,dy);
    hideLabels(el);
    dx=dy=0;
  };
}

function showLabel(el,dx,dy){
  hideLabels(el);
  if(Math.abs(dx)>Math.abs(dy)){
    el.querySelector(dx>0?".right":".left").style.opacity=1;
  }else{
    el.querySelector(dy>0?".down":".up").style.opacity=1;
  }
}

function hideLabels(el){
  el.querySelectorAll(".swipe").forEach(s=>s.style.opacity=0);
}

/* ---------------- LOGIC ---------------- */
function handleSwipe(dx,dy){
  if(Math.abs(dx)<40 && Math.abs(dy)<40) return;

  if(MODE==="DATASET"){ MODE="TOPIC"; render(); return; }
  if(MODE==="TOPIC"){ MODE="DEPTH"; render(); return; }

  if(MODE==="DEPTH"){
    if(Math.abs(dx)>Math.abs(dy)){
      MODE="COMING_SOON";
    }else{
      MODE="QUIZ";
    }
    render(); return;
  }

  if(MODE==="COMING_SOON"){
    MODE="DEPTH";
    render(); return;
  }
}

/* ---------------- INIT ---------------- */
render();
</script>

</body>
</html>
