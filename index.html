<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Alchemist V81.1</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #000; 
            --card: #0d0d0d; 
            --gold: #ffd600; 
            --border: #1a1a1a;
            --serif: 'Libre Baskerville', serif; 
            --ui: 'Outfit', sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            margin: 0; 
            height: 100vh; 
            background: var(--bg); 
            color: #fff; 
            font-family: var(--ui); 
            overflow: hidden; 
            touch-action: none; 
        }

        /* HEADER - V81.1 MINIMALISM */
        #header { width: 90%; margin: 35px auto 0; position: relative; z-index: 100; text-align: center; }
        .header-meta { 
            font-size: 0.75rem; 
            color: #444; 
            letter-spacing: 4px; 
            text-transform: uppercase; 
            font-weight: 900; 
        }

        /* THE ORIGINAL STACK */
        #stack { 
            position: relative; 
            width: 90%; 
            max-width: 400px; 
            height: 70vh; 
            margin: 40px auto 0; 
            perspective: 1000px; 
        }

        .card { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            background: var(--card); 
            border-radius: 24px; 
            border: 1px solid var(--border); 
            padding: 40px 25px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            z-index: 5; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
            transition: filter 0.4s ease, opacity 0.4s ease, transform 0.3s cubic-bezier(0.19, 1, 0.22, 1); 
        }

        /* THE ATMOSPHERIC BLUR (V81.1) */
        .card.study-active { 
            filter: blur(15px) brightness(0.3); 
            opacity: 0.6; 
            transform: scale(0.92) translateY(30px); 
            pointer-events: none; 
        }

        .card-q { 
            font-family: var(--serif); 
            font-size: 1.6rem; 
            line-height: 1.5; 
            font-weight: 700; 
            text-align: center; 
            color: #fff; 
        }

        /* STUDY DRAWER Reveal */
        .study-drawer { 
            position: absolute; 
            inset: 0; 
            padding: 40px 20px; 
            z-index: 10; 
            display: flex; 
            flex-direction: column; 
            opacity: 0; 
            visibility: hidden; 
            transform: translateY(20px); 
            transition: all 0.5s ease; 
        }

        .study-drawer.active { 
            opacity: 1; 
            visibility: visible; 
            transform: translateY(0); 
        }

        .bullet-item { 
            font-size: 1.05rem; 
            line-height: 1.7; 
            color: #bbb; 
            font-family: var(--serif); 
            margin-bottom: 20px; 
            padding-left: 20px; 
            position: relative; 
        }

        .bullet-item::before { 
            content: ""; 
            position: absolute; 
            left: 0; 
            top: 12px; 
            width: 5px; 
            height: 5px; 
            background: var(--gold); 
            border-radius: 50%; 
        }

        .principle-text { 
            font-size: 1.25rem; 
            line-height: 1.5; 
            color: var(--gold); 
            font-family: var(--serif); 
            font-style: italic; 
            border-top: 1px solid #1a1a1a; 
            padding-top: 25px; 
            margin-top: 15px; 
        }

        #loader { 
            position: fixed; 
            inset: 0; 
            background: #000; 
            z-index: 5000; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: 900; 
            color: var(--gold); 
            letter-spacing: 5px; 
        }
    </style>
</head>
<body>

<div id="loader">V81.1 INITIALIZING</div>

<div id="header">
    <div class="header-meta">CORE PREP / V81.1</div>
</div>

<div id="stack">
    <div id="study-drawer" class="study-drawer">
        <div id="bullet-mount"></div>
        <div id="judgement-text" class="principle-text"></div>
    </div>
</div>

<script>
    var DATABASE = [
        { "q": "Signs of ΔH and ΔS for spontaneity at all temps?", "bullets": ["ΔH < 0 (Exothermic)", "ΔS > 0 (Increased Disorder)"], "j": "Nature favors energy release and maximum entropy." },
        { "q": "Predict spontaneity: ΔH = -120 kJ, ΔS = -150 J/K at 298 K.", "bullets": ["ΔG = ΔH - TΔS", "ΔG = -120 - (298 * -0.150)", "Result: -75.3 kJ"], "j": "Exothermic release overcomes entropy loss at 298K." }
    ];

    var POOL = DATABASE.slice();
    var sy = 0;
    var isLocked = false;

    function init() { 
        setTimeout(function() { 
            var l = document.getElementById('loader');
            if(l) l.remove(); 
            render(); 
        }, 1000); 
    }

    function render() {
        var s = document.getElementById('stack');
        var existing = s.querySelector('.card');
        if(existing) existing.remove();
        
        if(!POOL.length) { 
            s.innerHTML = '<div class="card"><div class="card-q" style="color:#ffd600">STAY HUNGRY</div></div>'; 
            return; 
        }
        
        var d = POOL[0];
        var card = document.createElement('div');
        card.className = "card";
        card.innerHTML = '<div class="card-q">' + d.q + '</div>';
        s.appendChild(card);
        
        document.getElementById('bullet-mount').innerHTML = d.bullets.map(function(b) { 
            return '<div class="bullet-item">' + b + '</div>'; 
        }).join('');
        
        document.getElementById('judgement-text').innerText = d.j;
        document.getElementById('study-drawer').classList.remove('active');
        isLocked = false;
        
        bindPhysics(card);
    }

    function bindPhysics(el) {
        el.ontouchstart = function(e) { 
            sy = e.touches[0].clientY; 
            el.style.transition = "none"; 
        };
        
        el.ontouchmove = function(e) {
            var dy = e.touches[0].clientY - sy;
            if(!isLocked && dy > 100) { 
                isLocked = true;
                document.getElementById('study-drawer').classList.add('active');
                el.classList.add('study-active');
            }
            if(!isLocked && dy > 0) {
                el.style.transform = "translateY(" + (dy * 0.2) + "px)";
            }
        };

        el.ontouchend = function(e) {
            var dy = e.changedTouches[0].clientY - sy;
            if(isLocked && dy < -50) { 
                el.style.transition = "transform 0.4s ease-in, opacity 0.4s";
                el.style.transform = "translateY(-600px)";
                el.style.opacity = "0";
                setTimeout(function() { 
                    POOL.shift(); 
                    render(); 
                }, 300);
            } else {
                el.style.transition = "transform 0.3s ease";
                el.style.transform = "translateY(0)";
            }
        };
    }

    window.onload = init;
</script>
</body>
</html>
