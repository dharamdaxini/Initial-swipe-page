/* ============================================================
   0. UNIVERSAL SCIENTIFIC ROOT
   ============================================================ */
:root {
    --bg-app: #000000;
    --bg-protocol: #ffffff;
    --gold: #ffd600;
    --blue: #3498db;
    --font-serif: 'Crimson Text', serif;
    --font-sans: 'Inter', sans-serif;
    --font-mono: 'JetBrains Mono', monospace;
}

/* Base Typography for Science */
sub { font-size: 0.7em; vertical-align: sub; line-height: 0; }
sup { font-size: 0.7em; vertical-align: super; line-height: 0; }

/* ============================================================
   1. SCREEN-ONLY ARCHITECTURE (Singularity Stack)
   ============================================================ */
@media screen {
    body { 
        margin: 0; 
        height: 100vh; 
        background: var(--bg-app); 
        color: #fff;
        font-family: var(--font-sans); 
        overflow: hidden; /* Lock viewport for swipe gestures */
        position: fixed; 
        width: 100%;
        touch-action: none; 
    }

    /* HUD & Gesture Components */
    #header { width: 90%; margin: 25px auto 0; z-index: 100; }
    #stack { perspective: 1200px; width: 92%; height: 72vh; margin: 30px auto 0; }
    
    .card { 
        background: #111; 
        border: 1px solid #222;
        border-radius: 40px; 
        padding: 45px; 
        box-shadow: 0 30px 90px rgba(0,0,0,0.9);
        cursor: grab; 
    }

    .card-q { 
        font-family: var(--font-serif); 
        font-size: 1.9rem; 
        text-align: center; 
        font-style: italic; 
    }

    /* Logic Overlay for Mobile */
    .overlay {
        background: #0d0d0d;
        z-index: 1100;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
}

/* ============================================================
   2. PRINT-ONLY ARCHITECTURE (Alchemist Lab Standard)
   ============================================================ */
@media print {
    body { 
        background: var(--bg-protocol); 
        color: #000; 
        overflow: visible; /* Allow multi-page protocol generation */
        position: static; 
    }

    /* Hide Mobile HUD elements during PDF export */
    #header, #stack, .swipe-label, #loader, .btn { display: none !important; }

    .alch-protocol-container {
        display: block !important;
        width: 100%;
    }

    .alch-card {
        border: 2px solid #000;
        padding: 20mm;
        margin-bottom: 30px;
        page-break-inside: avoid;
        font-family: var(--font-serif);
    }

    .alch-meta { font-family: var(--font-mono); font-size: 9pt; font-weight: bold; }
    .alch-question { font-size: 17pt; line-height: 1.4; color: #000; }
    
    /* 3-Column Textbook Grid */
    .alch-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        border-top: 1px solid #000;
        border-bottom: 1px solid #000;
        margin: 20px 0;
    }

    .alch-option {
        border-right: 1px solid #000;
        padding: 10px;
        text-align: center;
        font-family: var(--font-sans);
    }
    .alch-option:last-child { border-right: none; }

    .alch-logic {
        border-left: 5px solid var(--blue);
        padding-left: 15px;
        font-style: italic;
        font-size: 12pt;
    }
}
