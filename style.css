:root { 
    --bg: #000; 
    --card: #111; 
    --gold: #ffd600; 
    --border: #222; 
    --serif: 'Libre Baskerville', serif; 
    --ui: 'Outfit', sans-serif; 
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
    margin: 0; 
    height: 100vh; 
    background: var(--bg); 
    color: #fff; 
    font-family: var(--ui); 
    overflow: hidden; 
    touch-action: none; 
}

/* HEADER METADATA */
#header { 
    width: 90%; 
    margin: 35px auto 0; 
    position: relative; 
    z-index: 100; 
}

.header-meta { 
    display: flex; 
    justify-content: space-between; 
    font-size: 0.7rem; 
    color: #555; 
    letter-spacing: 5px; 
    text-transform: uppercase; 
    font-weight: 900; 
}

/* THE PHYSICAL STACK ENGINE */
#stack { 
    position: relative; 
    width: 90%; 
    max-width: 400px; 
    height: 72vh; 
    margin: 35px auto 0; 
    perspective: 1200px; /* Essential for 3D depth */
}

.card { 
    position: absolute; 
    width: 100%; 
    height: 100%; 
    background: var(--card); 
    border-radius: 32px; 
    border: 1px solid var(--border); 
    padding: 45px 30px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    z-index: 5; 
    box-shadow: 0 30px 60px rgba(0,0,0,0.9);
    transition: filter 0.5s ease, opacity 0.4s ease, transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); 
    will-change: transform, filter;
}

/* THE RIFT STATE (V81.10 TRANSITION) */
.card.study-active { 
    filter: blur(25px) brightness(0.2); 
    opacity: 0.4; 
    transform: scale(0.88) translateY(50px) rotateX(-8deg); /* Recedes into 3D space */
    pointer-events: none; 
}

.card-q { 
    font-family: var(--serif); 
    font-size: 1.7rem; 
    line-height: 1.5; 
    font-weight: 700; 
    text-align: center; 
    color: #fff; 
}

/* REFINED STUDY DRAWER Reveal */
.study-drawer { 
    position: absolute; 
    inset: 0; 
    padding: 40px 25px; 
    z-index: 10; 
    display: flex; 
    flex-direction: column; 
    opacity: 0; 
    visibility: hidden; 
    transform: translateY(30px) scale(0.95); 
    transition: all 0.6s cubic-bezier(0.19, 1, 0.22, 1); 
}

.study-drawer.active { 
    opacity: 1; 
    visibility: visible; 
    transform: translateY(0) scale(1); 
}

.bullet-item { 
    font-size: 1.15rem; 
    line-height: 1.7; 
    color: #ccc; 
    font-family: var(--serif); 
    margin-bottom: 20px; 
    padding-left: 28px; 
    position: relative; 
}

.bullet-item::before { 
    content: ""; 
    position: absolute; 
    left: 0; 
    top: 12px; 
    width: 6px; 
    height: 6px; 
    background: var(--gold); 
    border-radius: 50%; 
    box-shadow: 0 0 10px var(--gold); 
}

.principle-text { 
    font-size: 1.4rem; 
    line-height: 1.5; 
    color: var(--gold); 
    font-family: var(--serif); 
    font-style: italic; 
    border-top: 1px solid #1a1a1a; 
    padding-top: 30px; 
    margin-top: 20px; 
}

#loader { 
    position: fixed; 
    inset: 0; 
    background: #000; 
    z-index: 5000; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-weight: 900; 
    color: var(--gold); 
    letter-spacing: 7px; 
}
