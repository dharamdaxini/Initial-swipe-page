/* --- UNIVERSAL ALCHEMIST V81.49 --- */
:root { 
    --bg: #000; --card: #111; --gold: #ffd600; --blue: #3498db; 
    --serif: 'Libre Baskerville', serif; --ui: 'Outfit', sans-serif; --code: 'JetBrains Mono', monospace; 
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
body { margin: 0; height: 100vh; background: var(--bg); color: #fff; font-family: var(--ui); overflow: hidden; touch-action: none; }

/* HEADER & PROGRESS */
#header { width: 90%; margin: calc(20px + env(safe-area-inset-top)) auto 0; z-index: 100; }
.header-meta { display: flex; justify-content: space-between; font-family: var(--code); font-size: 0.75rem; color: #555; margin-bottom: 8px; }
.progress-track { width: 100%; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
#progress-bar { height: 100%; background: var(--gold); width: 0%; transition: width 0.4s ease; }

/* CARD ENGINE */
#stack { position: relative; width: 92%; max-width: 400px; height: calc(100vh - 180px - env(safe-area-inset-top)); margin: 25px auto 0; perspective: 1200px; }
.card { 
    position: absolute; width: 100%; height: 100%; background: var(--card); border-radius: 40px; 
    border: 1px solid #282828; padding: 30px; display: flex; flex-direction: column; justify-content: center; 
    box-shadow: 0 20px 60px rgba(0,0,0,0.9); transform-origin: center center; will-change: transform; z-index: 1; 
    transition: backdrop-filter 0.8s ease-in-out; 
}

/* ATMOSPHERIC PULSE */
.card.pulse { animation: blurPulse 1.6s ease-in-out infinite; }
@keyframes blurPulse { 0%, 100% { backdrop-filter: blur(0px); } 50% { backdrop-filter: blur(8px); } }

/* TEXT ELEMENTS */
.card-q { 
    font-family: var(--serif); font-size: clamp(1.2rem, 4.5vw, 1.7rem); line-height: 1.4; 
    font-weight: 700; text-align: center; color: #f0f0f0; pointer-events: none; 
    transition: transform 0.25s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.15s ease; will-change: transform, opacity; z-index: 5; 
}

/* CARDINAL LABELS */
.swipe-label { 
    position: absolute; inset: 0; display: none; align-items: center; justify-content: center; 
    background: transparent; z-index: 2000; pointer-events: none; transition: transform 0.1s linear, opacity 0.2s ease; 
}
.label-content { display: flex; flex-direction: column; align-items: center; gap: 10px; font-weight: 900; font-size: 1.6rem; text-transform: uppercase; color: var(--gold); }
.arrow { font-size: 2.5rem; }

/* RIFT & JUDGMENT LAYOUT */
.study-wrap { width: 100%; padding: 0 20px; position: absolute; top: 48%; left: 0; transform: translateY(-50%); z-index: 4; text-align: center; }
.context-block, .judgement-block { opacity: 0; transform: translateY(10px); transition: all 0.6s cubic-bezier(0.19, 1, 0.22, 1); }
.active .context-block { opacity: 1; transform: translateY(0); }
.active .judgement-block { opacity: 1; transform: translateY(0); transition-delay: 0.3s; margin-top: 15px; padding-top: 15px; border-top: 1px solid #333; }

.study-header { font-size: 0.75rem; color: #666; font-family: var(--code); margin-bottom: 8px; letter-spacing: 2px; font-weight: 900; text-transform: uppercase; }
.bullet-list { list-style: none; padding: 0; margin: 0; text-align: left; display: inline-block; }
.bullet-item { font-size: 1.05rem; line-height: 1.5; color: #eee; font-family: var(--serif); margin-bottom: 10px; position: relative; padding-left: 25px; }
.bullet-item::before { content: "â€¢"; position: absolute; left: 0; color: var(--gold); font-size: 1.4rem; }
.judgement-body { font-size: 1.1rem; line-height: 1.6; color: #ccc; font-family: var(--serif); font-style: italic; }

.sl-dn { flex-direction: column !important; justify-content: center !important; }
.sl-down-emoji { font-size: 4rem; display: none; opacity: 0; transition: filter 0.1s, opacity 0.2s; will-change: filter, transform, opacity; margin-top: 20px; z-index: 6; }
